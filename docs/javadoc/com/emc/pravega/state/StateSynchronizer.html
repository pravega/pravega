<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_121) on Fri Feb 17 18:10:19 IST 2017 -->
<title>StateSynchronizer (host API)</title>
<meta name="date" content="2017-02-17">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="StateSynchronizer (host API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/emc/pravega/state/RevisionedStreamClient.html" title="interface in com.emc.pravega.state"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/emc/pravega/state/SynchronizerConfig.html" title="class in com.emc.pravega.state"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/emc/pravega/state/StateSynchronizer.html" target="_top">Frames</a></li>
<li><a href="StateSynchronizer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.emc.pravega.state</div>
<h2 title="Interface StateSynchronizer" class="title">Interface StateSynchronizer&lt;StateT extends <a href="../../../../com/emc/pravega/state/Revisioned.html" title="interface in com.emc.pravega.state">Revisioned</a>&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>StateT</code> - The type of the object whose updates are being synchronized.</dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">StateSynchronizer&lt;StateT extends <a href="../../../../com/emc/pravega/state/Revisioned.html" title="interface in com.emc.pravega.state">Revisioned</a>&gt;</span></pre>
<div class="block">Provides a means to have state that is synchronized between many processes. This provides a
 higher level abstraction over <a href="../../../../com/emc/pravega/state/RevisionedStreamClient.html" title="interface in com.emc.pravega.state"><code>RevisionedStreamClient</code></a>.
 
 The pattern is to have an object of type StateT that can be updated by objects of type UpdateT.
 Each host can perform logic based on its current StateT object and apply updates by supplying a
 function to create UpdateT objects. Updates from other hosts can be obtained by calling
 <a href="../../../../com/emc/pravega/state/StateSynchronizer.html#fetchUpdates--"><code>fetchUpdates()</code></a>
 
 The applying of updates can be conditional on the state that was provided to their generator
 being the most recent revision, and retrying if it is not. This provides a strong consistency
 through optimistic concurrency.
 
 As with any optimistic concurrency system, this works best when optimism is justified: i.e. The
 odds are good another host is not updating the state at the exact same time.
 
 Because they are held in memory and transmitted over the network, state objects are updates
 should be relatively compact. Implementations might explicitly enforce size limits.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/emc/pravega/state/StateSynchronizer.html#compact-java.util.function.Function-">compact</a></span>(java.util.function.Function&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>,<a href="../../../../com/emc/pravega/state/InitialUpdate.html" title="interface in com.emc.pravega.state">InitialUpdate</a>&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>&gt;&gt;&nbsp;compactor)</code>
<div class="block">Provide a function that generates compacted version of localState so that we can drop some of the
 history updates.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/emc/pravega/state/StateSynchronizer.html#fetchUpdates--">fetchUpdates</a></span>()</code>
<div class="block">Fetch and apply all updates needed to the state object held locally up to date.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/emc/pravega/state/StateSynchronizer.html#getState--">getState</a></span>()</code>
<div class="block">Gets the state object currently held in memory.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/emc/pravega/state/StateSynchronizer.html#initialize-com.emc.pravega.state.InitialUpdate-">initialize</a></span>(<a href="../../../../com/emc/pravega/state/InitialUpdate.html" title="interface in com.emc.pravega.state">InitialUpdate</a>&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>&gt;&nbsp;initial)</code>
<div class="block">This method can be used to provide an initial value for a new stream if the stream has not
 been previously initialized.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/emc/pravega/state/StateSynchronizer.html#updateState-java.util.function.Function-">updateState</a></span>(java.util.function.Function&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>,java.util.List&lt;? extends <a href="../../../../com/emc/pravega/state/Update.html" title="interface in com.emc.pravega.state">Update</a>&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>&gt;&gt;&gt;&nbsp;updateGenerator)</code>
<div class="block">Creates a new update for the latest state object and applies it atomically.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/emc/pravega/state/StateSynchronizer.html#updateStateUnconditionally-java.util.List-">updateStateUnconditionally</a></span>(java.util.List&lt;? extends <a href="../../../../com/emc/pravega/state/Update.html" title="interface in com.emc.pravega.state">Update</a>&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>&gt;&gt;&nbsp;update)</code>
<div class="block">Same as <a href="../../../../com/emc/pravega/state/StateSynchronizer.html#updateStateUnconditionally-com.emc.pravega.state.Update-"><code>updateStateUnconditionally(Update)</code></a>, except it persists multiple updates at
 the same time so they will not be interleaved with other updates.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/emc/pravega/state/StateSynchronizer.html#updateStateUnconditionally-com.emc.pravega.state.Update-">updateStateUnconditionally</a></span>(<a href="../../../../com/emc/pravega/state/Update.html" title="interface in com.emc.pravega.state">Update</a>&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>&gt;&nbsp;update)</code>
<div class="block">Persists the provided update.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getState</h4>
<pre><a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>&nbsp;getState()</pre>
<div class="block">Gets the state object currently held in memory.
 This is a non-blocking call.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>revisioned state object</dd>
</dl>
</li>
</ul>
<a name="fetchUpdates--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchUpdates</h4>
<pre>void&nbsp;fetchUpdates()</pre>
<div class="block">Fetch and apply all updates needed to the state object held locally up to date.</div>
</li>
</ul>
<a name="updateState-java.util.function.Function-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateState</h4>
<pre>void&nbsp;updateState(java.util.function.Function&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>,java.util.List&lt;? extends <a href="../../../../com/emc/pravega/state/Update.html" title="interface in com.emc.pravega.state">Update</a>&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>&gt;&gt;&gt;&nbsp;updateGenerator)</pre>
<div class="block">Creates a new update for the latest state object and applies it atomically.
 
 The function provided will be passed the latest state object, it returns what if any updates
 should be applied to the state object. These updates are recorded and applied conditionally
 on the state object that was passed to the function being up to date. If another process was
 applying an update in parallel, the state is updated and updateGenerator will be called again
 with the new state object so that it may generate a new update. (Which may be different from
 the one it previously generated) By re-creating the updates in this way, consistency is
 guaranteed. When this function returns the generated updates will have been applied to the
 local state.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>updateGenerator</code> - A function that given the current state can supply updates that should be applied.</dd>
</dl>
</li>
</ul>
<a name="updateStateUnconditionally-com.emc.pravega.state.Update-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateStateUnconditionally</h4>
<pre>void&nbsp;updateStateUnconditionally(<a href="../../../../com/emc/pravega/state/Update.html" title="interface in com.emc.pravega.state">Update</a>&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>&gt;&nbsp;update)</pre>
<div class="block">Persists the provided update. To ensure consistent ordering of updates across hosts the
 update is not applied locally until <a href="../../../../com/emc/pravega/state/StateSynchronizer.html#fetchUpdates--"><code>fetchUpdates()</code></a> is called.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>update</code> - The update that all other processes should receive.</dd>
</dl>
</li>
</ul>
<a name="updateStateUnconditionally-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateStateUnconditionally</h4>
<pre>void&nbsp;updateStateUnconditionally(java.util.List&lt;? extends <a href="../../../../com/emc/pravega/state/Update.html" title="interface in com.emc.pravega.state">Update</a>&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>&gt;&gt;&nbsp;update)</pre>
<div class="block">Same as <a href="../../../../com/emc/pravega/state/StateSynchronizer.html#updateStateUnconditionally-com.emc.pravega.state.Update-"><code>updateStateUnconditionally(Update)</code></a>, except it persists multiple updates at
 the same time so they will not be interleaved with other updates.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>update</code> - The updates that all other processes should receive.</dd>
</dl>
</li>
</ul>
<a name="initialize-com.emc.pravega.state.InitialUpdate-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>void&nbsp;initialize(<a href="../../../../com/emc/pravega/state/InitialUpdate.html" title="interface in com.emc.pravega.state">InitialUpdate</a>&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>&gt;&nbsp;initial)</pre>
<div class="block">This method can be used to provide an initial value for a new stream if the stream has not
 been previously initialized. If the stream was already initialized nothing will be changed,
 and the local state will be updated as though <a href="../../../../com/emc/pravega/state/StateSynchronizer.html#fetchUpdates--"><code>fetchUpdates()</code></a></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>initial</code> - The initializer for the state</dd>
</dl>
</li>
</ul>
<a name="compact-java.util.function.Function-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>compact</h4>
<pre>void&nbsp;compact(java.util.function.Function&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>,<a href="../../../../com/emc/pravega/state/InitialUpdate.html" title="interface in com.emc.pravega.state">InitialUpdate</a>&lt;<a href="../../../../com/emc/pravega/state/StateSynchronizer.html" title="type parameter in StateSynchronizer">StateT</a>&gt;&gt;&nbsp;compactor)</pre>
<div class="block">Provide a function that generates compacted version of localState so that we can drop some of the
 history updates.
 
 NOTE: If InitialUpdate returned does not generate local state exactly corruption will occur.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>compactor</code> - An generator of InitialUpdates given a state.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/emc/pravega/state/RevisionedStreamClient.html" title="interface in com.emc.pravega.state"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/emc/pravega/state/SynchronizerConfig.html" title="class in com.emc.pravega.state"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/emc/pravega/state/StateSynchronizer.html" target="_top">Frames</a></li>
<li><a href="StateSynchronizer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
