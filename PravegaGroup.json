{
  "id": "/pravega",
  "groups": [
    {
      "id": "/pravega/bkgroup",
      "apps": [
      { 
          "id": "/pravega/bkgroup/bookie", 
          "cpus": 1,
          "mem": 500,
          "instances": 3,
          "constraints": [["hostname", "UNIQUE"]],
          "container": {
              "type": "DOCKER",
              "volumes": [
              {
                  "containerPath": "/bk/journal",
                  "hostPath": "/mnt/journal",
                  "mode": "RW"
              },
              {
                  "containerPath": "/bk/index",
                  "hostPath": "/mnt/index",
                  "mode": "RW"
              },
              {
                  "containerPath": "/bk/ledgers",
                  "hostPath": "/mnt/ledgers",
                  "mode": "RW"
              },

              {
                  "containerPath": "persist",
                  "mode": "RW",
                  "persistent": {
                      "size": 70
                  }
              }
              ],

              "docker": {
                  "image": "zhaijia/bookkeeper",
                  "network": "HOST"
              }
          },

          "portDefinitions": [
          {
              "protocol": "tcp",
              "port": 3181
          },
          {
              "protocol": "tcp",
              "port": 12345
          },
          {
              "protocol": "tcp",
              "port": 9090 
          }

          ],

          "requirePorts": true,

          "env": {
              "ZK": "master.mesos:2181"
          },

          "upgradeStrategy": {
              "maximumOverCapacity": 0,
              "minimumHealthCapacity": 0
          }

      }
      ]
    },
    {
      "id": "/pravega/hostgroup",
      "dependencies": ["/pravega/bkgroup"],
      "dependencies": ["/pravega/controllergroup"],
      "apps": [
      { 
          "id": "/pravega/hostgroup/host",
	  "backoffSeconds": 7200, 
          "cpus": 0.4,
          "mem": 1000,
          "instances": 2,
          "constraints": [["hostname", "UNIQUE"]],
          "container": {
              "type": "DOCKER",
              "docker": {
                  "image": "arvindkandhare/pravega_host",
                  "network": "HOST",
		  "forcePullImage": true
              }
          },

          "portDefinitions": [
          {
              "protocol": "tcp",
              "port": 12345
          }
          ],

          "requirePorts": true,

          "upgradeStrategy": {
              "maximumOverCapacity": 0,
              "minimumHealthCapacity": 0
          }
      }
      ]
    },
    {
      "id": "/pravega/controllergroup",
      "dependencies": ["/pravega/bkgroup"],
      "apps": [
      { 
          "id": "/pravega/controllergroup/controller", 
          "cpus": 0.4,
          "mem": 500,
          "instances": 2,
          "constraints": [["hostname", "UNIQUE"]],
          "container": {
              "type": "DOCKER",
              "docker": {
                  "image": "arvindkandhare/pravega_controller",
                  "network": "HOST"
              }
          },

          "portDefinitions": [
          {
              "protocol": "tcp",
              "port": 9090 
          }
          ],

          "requirePorts": true,

          "upgradeStrategy": {
              "maximumOverCapacity": 0,
              "minimumHealthCapacity": 0
          }
      }
      ]
    }
  ]
}

