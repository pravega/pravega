{
  "id": "/pravega",
  "groups": [
    {
      "id": "/pravega/bkgroup",
      "apps": [
      { 
          "id": "/pravega/bkgroup/bookie", 
          "cpus": 2,
          "mem": 1000,
          "instances":5,
          "constraints": [["hostname", "UNIQUE"]],
          "container": {
              "type": "DOCKER",
              "volumes": [
	    {
        "containerPath": "/bk/ledgers",
        "hostPath": "/mnt/bkl",
        "mode": "RW"
      },
 {
        "containerPath": "/bk/journal",
        "hostPath": "/mnt/bkj",
        "mode": "RW"
      },
 {
        "containerPath": "/bk/index",
        "hostPath": "/mnt/bki",
        "mode": "RW"
      },
              {
                  "containerPath": "persist",
                  "mode": "RW",
                  "persistent": {
                      "size": 7000
                  }
              }
              ],

              "docker": {
                  "image": "zhaijia/bookkeeper",
                  "network": "HOST",
                   "parameters": [
                                        { "key": "env",
                                          "value": "DLOG_EXTRA_OPTS=-Xms512m " }]

              }
          },

          "portDefinitions": [
          {
              "protocol": "tcp",
              "port": 3181
          }

          ],

          "requirePorts": true,

          "env": {
              "ZK": "master.mesos:2181"
          },

          "upgradeStrategy": {
              "maximumOverCapacity": 0,
              "minimumHealthCapacity": 0
          }

      }
      ]
    },
    {
      "id": "/pravega/hostgroup",
      "dependencies": ["/pravega/bkgroup"],
      "dependencies": ["/pravega/controllergroup"],
      "apps": [
      { 
          "id": "/pravega/hostgroup/host",
	  "backoffSeconds": 7200, 
          "cpus": 2,
          "mem": 1000,
          "instances": 3,
          "constraints": [["hostname", "UNIQUE"]],
          "container": {
              "type": "DOCKER",
	    "volumes": [
              {
                  "containerPath": "/tmp/logs",
                  "hostPath": "/mnt/logs",
                  "mode": "RW"
              }
		],
              "docker": {
                  "image": "arvindkandhare/pravega_host",
                  "network": "HOST",
		  "forcePullImage": false,
 		  "parameters": [
                                        {
					  "key": "env",
                                          "value": "pravegaservice_enablezipkin=false"
				        }
                              ]
              }
          },

          "portDefinitions": [
          {
              "protocol": "tcp",
              "port": 12345
          }
          ],

          "requirePorts": true,

          "upgradeStrategy": {
              "maximumOverCapacity": 0,
              "minimumHealthCapacity": 0
          }
      }
      ]
    },
    {
      "id": "/pravega/controllergroup",
      "dependencies": ["/pravega/bkgroup"],
      "apps": [
      { 
          "id": "/pravega/controllergroup/controller", 
          "cpus": 0.4,
          "mem": 500,
          "instances": 2,
          "constraints": [["hostname", "UNIQUE"]],
          "container": {
              "type": "DOCKER",
              "docker": {
                  "image": "arvindkandhare/pravega_controller",
                  "network": "HOST",
		   "parameters": [
        				{ "key": "env",
        				  "value": "SERVER_OPTS=\"-DZK_URL=master.mesos:2181\"" }
		    ],
		  "forcePullImage": false
              }
          },

          "portDefinitions": [
          {
              "protocol": "tcp",
              "port": 9090 
          }
          ],

          "requirePorts": true,

          "upgradeStrategy": {
              "maximumOverCapacity": 0,
              "minimumHealthCapacity": 0
          }
      }
      ]
    }
  ]
}

